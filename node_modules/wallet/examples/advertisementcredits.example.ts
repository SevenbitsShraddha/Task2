import * as api from "../api";

async function advertisementCredits() {
    let client = new api.AdvertisementCreditsApi();

    // Create a new advertisement credit
    let adCredit = await client.createAdvertisementCredit({
        title: "Ad Credit",
        valueType: "percent",
        paymentDesignID: "HUdjo93KL",
        maxUses: 5,
        discountValue: 5,
    }).catch(err => {
        throw err;
    }).then(resp => {
        return resp.body
    });

    // The advertisement credit that has just been created
    console.log(adCredit);

    // Update the advertisement credit with a new maxUses count
    adCredit = await client.updateAdvertisementCredit(adCredit.id, {
        ...adCredit,
        maxUses: 10,
    }).catch(err => {
        throw err;
    }).then(resp => {
        return resp.body
    });

    // Archive the advertisement credit
    adCredit = await client.archiveAdvertisementCredit(adCredit.id)
        .catch(err => {
            throw err;
        }).then(resp => {
            return resp.body
        });

    console.log(adCredit.isActive); // This will be false, since the advertisement credit has just been archived

    // Restore the advertisement credit
    adCredit = await client.restoreAdvertisementCredit(adCredit.id)
        .catch(err => {
            throw err;
        }).then(resp => {
            return resp.body
        });

    console.log(adCredit.isActive); // This will be true, since the advertisement credit has just been restored
}